<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="style.css">
  <title>WebNet - Add new post</title>
</head>
<body>

  <header>New Post</header>

  <div class="chat-list" id="chatList">
      <br><br>
    This page is incomplete. Come back later
  </div>

  <nav>
    <a href="lobby.html"><i class="fas fa-home"></i></a>
    <a href="search.html"><i class="fas fa-search"></i></a>
    <a href="profile.html"><i class="fas fa-user"></i></a>
  </nav>

  <!-- Firebase + Lobby Logic -->
  <script src="script.js"></script>
 <script type="module">
  import { auth, database } from './firebase-init.js';

  // Example: check if user is signed in
  import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";

  onAuthStateChanged(auth, (user) => {
    if (user) {
      console.log("Logged in:", user.email);
    } else {
      window.location.href = "index.html";
    }
  });
// firebase-init.js
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
import { getAuth } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";
import { getDatabase } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyA6lvIUQ36aLbjomZnUqsIkkDgv017tcqI",
  authDomain: "webnet2.firebaseapp.com",
  projectId: "webnet2",
  storageBucket: "webnet2.firebasestorage.app",
  messagingSenderId: "323870835138",
  appId: "1:323870835138:web:bca571d5620b766651565b",
  databaseURL: "https://webnet2-default-rtdb.firebaseio.com"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const database = getDatabase(app);

export { app, auth, database };
</script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const chatList = document.getElementById("chatList");

    const dummyChats = [
      { name: "Jayden", preview: "Yo what's up" },
      { name: "Motunrayo", preview: "Sent a picture" },
      { name: "Zee", preview: "See you at break" },
    ];

    function loadChats() {
      dummyChats.forEach(chat => {
        const chatItem = document.createElement("div");
        chatItem.classList.add("chat-item");
        chatItem.innerHTML = `
          <div class="chat-name">${chat.name}</div>
          <div class="chat-preview">${chat.preview}</div>
        `;
        chatItem.onclick = () => {
          window.location.href = `chatroom.html?user=${chat.name}`;
        };
        chatList.appendChild(chatItem);
      });
    }

    // Auth check
    onAuthStateChanged(auth, (user) => {
      if (user) {
        loadChats();
      } else {
        window.location.href = "index.html";
      }
    });

    // Logout
    window.logout = async function () {
      await signOut(auth);
    };
  </script>
</body>
</html>